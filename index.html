<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>D.ELITE</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root{--bg:#0a0c10;--surface:#111318;--surface2:#181c24;--border:#1e2330;--accent:#4f8ef7;--accent2:#f7934f;--accent3:#4ff7a0;--accent4:#f74f7a;--text:#e8eaf0;--text2:#7a8099;--text3:#3d4259;--font-display:'Syne',sans-serif;--font-mono:'JetBrains Mono',monospace}
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:var(--bg);color:var(--text);font-family:var(--font-mono);min-height:100vh;overflow-x:hidden}
  body::before{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(79,142,247,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(79,142,247,0.03) 1px,transparent 1px);background-size:40px 40px;pointer-events:none;z-index:0}
  .app{position:relative;z-index:1;max-width:480px;margin:0 auto;padding:0 0 100px}
  .header{padding:24px 20px 16px;border-bottom:1px solid var(--border);position:sticky;top:0;background:rgba(10,12,16,0.95);backdrop-filter:blur(12px);z-index:100}
  .header-top{display:flex;justify-content:space-between;align-items:center}
  .logo{font-family:var(--font-display);font-size:20px;font-weight:800;color:var(--text);letter-spacing:-.5px}
  .logo span{color:var(--accent)}
  .date-pill{background:var(--surface2);border:1px solid var(--border);padding:4px 12px;border-radius:20px;font-size:11px;color:var(--text2);letter-spacing:.5px}
  .progress-row{display:flex;gap:8px;margin-top:14px}
  .progress-item{flex:1}
  .progress-label{font-size:9px;color:var(--text3);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}
  .progress-bar{height:3px;background:var(--border);border-radius:2px;overflow:hidden}
  .progress-fill{height:100%;border-radius:2px;transition:width .5s ease}
  .p-blue{background:var(--accent)}.p-orange{background:var(--accent2)}.p-green{background:var(--accent3)}
  .progress-val{font-size:10px;color:var(--text2);margin-top:3px}
  .notif-banner{margin:12px 16px 0;padding:12px 16px;background:linear-gradient(135deg,rgba(79,142,247,.12),rgba(79,142,247,.05));border:1px solid rgba(79,142,247,.3);border-radius:12px;display:flex;align-items:center;gap:12px}
  .notif-icon{font-size:20px;flex-shrink:0}.notif-text{flex:1}
  .notif-title{font-family:var(--font-display);font-size:13px;font-weight:700;color:var(--accent)}
  .notif-sub{font-size:10px;color:var(--text2);margin-top:2px}
  .notif-dismiss{background:none;border:none;color:var(--text3);cursor:pointer;font-size:16px;padding:4px}
  .nav{display:flex;gap:2px;padding:12px 16px 0;overflow-x:auto;scrollbar-width:none}
  .nav::-webkit-scrollbar{display:none}
  .nav-btn{flex-shrink:0;padding:7px 14px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--text2);font-family:var(--font-mono);font-size:11px;cursor:pointer;transition:all .2s;letter-spacing:.5px;white-space:nowrap}
  .nav-btn.active{background:var(--accent);border-color:var(--accent);color:#fff;font-weight:500}
  .section{display:none;padding:16px}.section.active{display:block}
  .timeline{position:relative}
  .timeline::before{content:'';position:absolute;left:19px;top:0;bottom:0;width:1px;background:var(--border)}
  .timeline-item{display:flex;gap:16px;margin-bottom:6px;position:relative}
  .timeline-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0;margin-top:14px;position:relative;z-index:1;border:2px solid var(--bg)}
  .dot-pending{background:var(--border);border-color:var(--border)}.dot-current{background:var(--accent);box-shadow:0 0 0 4px rgba(79,142,247,.2);animation:dot-pulse 2s infinite}.dot-done{background:var(--accent3);border-color:var(--accent3)}.dot-critical{background:var(--accent4);border-color:var(--accent4)}
  @keyframes dot-pulse{0%,100%{box-shadow:0 0 0 4px rgba(79,142,247,.2)}50%{box-shadow:0 0 0 8px rgba(79,142,247,.1)}}
  .timeline-card{flex:1;padding:12px 14px;border-radius:10px;background:var(--surface);border:1px solid var(--border);cursor:pointer}
  .timeline-card.current-card{border-color:rgba(79,142,247,.4);background:linear-gradient(135deg,rgba(79,142,247,.08),var(--surface))}.timeline-card.done-card{opacity:.6}
  .card-row{display:flex;justify-content:space-between;align-items:center}
  .card-time{font-size:10px;color:var(--text3)}.card-tag{font-size:9px;padding:2px 7px;border-radius:4px;text-transform:uppercase;font-weight:500}
  .tag-critical{background:rgba(247,79,122,.15);color:var(--accent4)}.tag-study{background:rgba(79,142,247,.15);color:var(--accent)}.tag-food{background:rgba(79,247,160,.15);color:var(--accent3)}.tag-gym{background:rgba(247,147,79,.15);color:var(--accent2)}.tag-routine{background:rgba(122,128,153,.15);color:var(--text2)}.tag-sleep{background:rgba(79,79,247,.15);color:#9b8ef7}
  .card-title{font-family:var(--font-display);font-size:14px;font-weight:700;margin-top:4px;color:var(--text)}.card-sub{font-size:10px;color:var(--text2);margin-top:2px}
  .check-btn{margin-top:8px;width:100%;padding:7px;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--text2);font-family:var(--font-mono);font-size:11px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px}
  .check-btn.checked{background:rgba(79,247,160,.1);border-color:var(--accent3);color:var(--accent3)}
  .habit-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .habit-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;cursor:pointer;position:relative;overflow:hidden}
  .habit-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--accent);transform:scaleX(0);transform-origin:left;transition:transform .3s}
  .habit-card.done::before{transform:scaleX(1)}.habit-card.done{border-color:rgba(79,247,160,.3)}
  .habit-icon{font-size:24px;margin-bottom:8px}.habit-name{font-family:var(--font-display);font-size:13px;font-weight:700;color:var(--text)}.habit-target{font-size:10px;color:var(--text2);margin-top:2px}.habit-status{margin-top:10px;font-size:11px;font-weight:500;color:var(--text3)}.habit-card.done .habit-status{color:var(--accent3)}
  .macro-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
  .macro-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px}
  .macro-label{font-size:9px;color:var(--text3);letter-spacing:1px;text-transform:uppercase}.macro-vals{display:flex;align-items:baseline;gap:4px;margin:6px 0}.macro-current{font-family:var(--font-display);font-size:22px;font-weight:800}.macro-sep{color:var(--text3);font-size:14px}.macro-target{font-size:13px;color:var(--text2)}.macro-unit{font-size:10px;color:var(--text3)}.macro-bar{height:4px;background:var(--border);border-radius:2px;overflow:hidden}.macro-fill{height:100%;border-radius:2px}
  .c-cal{color:#f7934f}.m-cal{background:linear-gradient(90deg,#f7934f,#f7cd4f)}.c-prot{color:#4f8ef7}.m-prot{background:linear-gradient(90deg,#4f8ef7,#9b8ef7)}.c-carb{color:#f7934f}.m-carb{background:linear-gradient(90deg,#f74f7a,#f7934f)}.c-fat{color:#4ff7a0}.m-fat{background:linear-gradient(90deg,#4ff7a0,#4ff7d4)}
  .meal-list{display:flex;flex-direction:column;gap:6px}.meal-item{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--surface);border:1px solid var(--border);border-radius:10px;cursor:pointer}.meal-item.eaten{border-color:rgba(79,247,160,.3);opacity:.7}.meal-time{font-size:10px;color:var(--text3);width:48px;flex-shrink:0}.meal-info{flex:1}.meal-name{font-size:13px;font-weight:500;color:var(--text)}.meal-macros{font-size:10px;color:var(--text2);margin-top:1px}.meal-check{font-size:18px;color:var(--text3)}.meal-item.eaten .meal-check{color:var(--accent3)}
  .workout-header{background:linear-gradient(135deg,rgba(247,147,79,.15),rgba(247,147,79,.05));border:1px solid rgba(247,147,79,.3);border-radius:12px;padding:16px;margin-bottom:16px}.workout-day{font-family:var(--font-display);font-size:22px;font-weight:800;color:var(--accent2)}.workout-focus{font-size:12px;color:var(--text2);margin-top:2px}.workout-timer{margin-top:10px;display:flex;gap:8px}.timer-btn{flex:1;padding:8px;border-radius:8px;border:1px solid rgba(247,147,79,.3);background:rgba(247,147,79,.1);color:var(--accent2);font-family:var(--font-mono);font-size:12px;cursor:pointer}.timer-btn.primary{background:var(--accent2);color:#fff;border-color:var(--accent2)}.timer-display{text-align:center;font-family:var(--font-display);font-size:36px;font-weight:800;color:var(--text);margin:12px 0;letter-spacing:-1px}
  .exercise-list{display:flex;flex-direction:column;gap:6px}.exercise-item{padding:12px 14px;background:var(--surface);border:1px solid var(--border);border-radius:10px;display:flex;align-items:center;gap:12px;cursor:pointer}.exercise-item.done-ex{border-color:rgba(79,247,160,.3)}.ex-num{font-size:11px;color:var(--text3);width:20px;flex-shrink:0}.ex-info{flex:1}.ex-name{font-size:13px;font-weight:500;color:var(--text)}.ex-sets{font-size:10px;color:var(--text2);margin-top:1px}.ex-check{font-size:18px;color:var(--text3)}.exercise-item.done-ex .ex-check{color:var(--accent3)}
  .study-timer-card{background:linear-gradient(135deg,rgba(79,142,247,.12),rgba(79,142,247,.04));border:1px solid rgba(79,142,247,.3);border-radius:16px;padding:24px;text-align:center;margin-bottom:16px}.study-phase{font-size:10px;color:var(--accent);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}.study-topic{font-family:var(--font-display);font-size:18px;font-weight:800;color:var(--text);margin-bottom:16px}.study-ring{width:120px;height:120px;margin:16px auto;position:relative}.study-ring svg{transform:rotate(-90deg)}.ring-bg{fill:none;stroke:var(--border);stroke-width:6}.ring-fill{fill:none;stroke:var(--accent);stroke-width:6;stroke-linecap:round;transition:stroke-dashoffset 1s}.ring-text{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column}.ring-min{font-family:var(--font-display);font-size:24px;font-weight:800;color:var(--text)}.ring-label{font-size:9px;color:var(--text2)}.study-controls{display:flex;gap:8px;margin-top:12px}.study-btn{flex:1;padding:10px;border-radius:10px;border:none;font-family:var(--font-mono);font-size:12px;cursor:pointer}.btn-start{background:var(--accent);color:#fff}.btn-pause{background:var(--surface2);border:1px solid var(--border);color:var(--text2)}.btn-reset{background:var(--surface2);border:1px solid var(--border);color:var(--text2)}
  .phase-blocks{display:flex;flex-direction:column;gap:8px}.phase-block{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--surface);border:1px solid var(--border);border-radius:10px}.phase-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}.phase-info{flex:1}.phase-name{font-size:12px;font-weight:500;color:var(--text)}.phase-time{font-size:10px;color:var(--text2);margin-top:1px}.phase-status{font-size:11px;color:var(--text3)}
  .log-input-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px}.log-input-title{font-family:var(--font-display);font-size:14px;font-weight:700;margin-bottom:12px;color:var(--accent4)}.log-field{margin-bottom:10px}.log-label{font-size:9px;color:var(--text3);letter-spacing:1px;text-transform:uppercase;margin-bottom:4px}.log-input{width:100%;padding:10px 12px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);font-family:var(--font-mono);font-size:12px;outline:none;resize:none}.log-input:focus{border-color:var(--accent4)}.log-submit{width:100%;padding:10px;background:rgba(247,79,122,.15);border:1px solid var(--accent4);border-radius:8px;color:var(--accent4);font-family:var(--font-mono);font-size:12px;cursor:pointer}.log-submit:hover{background:var(--accent4);color:#fff}
  .log-entries{display:flex;flex-direction:column;gap:8px}.log-entry{padding:14px;background:var(--surface);border:1px solid var(--border);border-radius:10px;border-left:3px solid var(--accent4)}.log-entry-date{font-size:10px;color:var(--text3);margin-bottom:6px}.log-entry-what{font-size:12px;color:var(--text);font-weight:500}.log-entry-why{font-size:11px;color:var(--text2);margin-top:4px}.log-entry-fix{font-size:11px;color:var(--accent3);margin-top:4px}
  .score-big{text-align:center;padding:24px;background:var(--surface);border:1px solid var(--border);border-radius:16px;margin-bottom:16px}.score-label{font-size:10px;color:var(--text3);letter-spacing:1px;text-transform:uppercase;margin-bottom:8px}.score-number{font-family:var(--font-display);font-size:72px;font-weight:800;line-height:1}.score-max{font-size:24px;color:var(--text3)}.score-grade{font-size:14px;color:var(--text2);margin-top:8px}.score-breakdown{display:flex;flex-direction:column;gap:6px}.score-row{display:flex;align-items:center;gap:12px;padding:10px 14px;background:var(--surface);border:1px solid var(--border);border-radius:10px}.score-row-name{flex:1;font-size:12px;color:var(--text)}.score-row-val{font-size:13px;font-weight:700;font-family:var(--font-display)}.score-row-max{font-size:11px;color:var(--text3)}
  .bottom-nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:480px;background:rgba(17,19,24,.97);backdrop-filter:blur(12px);border-top:1px solid var(--border);display:flex;z-index:100}.bnav-btn{flex:1;padding:10px 4px;background:none;border:none;color:var(--text3);cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:3px}.bnav-btn.active{color:var(--accent)}.bnav-icon{font-size:20px}.bnav-label{font-size:9px;letter-spacing:.5px}
  .section-title{font-family:var(--font-display);font-size:18px;font-weight:800;color:var(--text);margin-bottom:14px;letter-spacing:-.3px}.section-sub{font-size:11px;color:var(--text2);margin-top:-10px;margin-bottom:14px}.divider{height:1px;background:var(--border);margin:16px 0}
  .empty-state{text-align:center;padding:40px 20px;color:var(--text3);font-size:13px}.empty-state .e-icon{font-size:40px;margin-bottom:12px}
  .win-badge{background:linear-gradient(135deg,rgba(79,247,160,.15),rgba(79,247,160,.05));border:1px solid rgba(79,247,160,.3);border-radius:10px;padding:12px 14px;margin-bottom:10px;display:flex;align-items:center;gap:10px}.win-badge .win-icon{font-size:20px}.win-badge .win-text{font-size:12px;color:var(--accent3);font-weight:500}
  .toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(20px);background:var(--surface2);border:1px solid var(--border);padding:10px 20px;border-radius:20px;font-size:12px;color:var(--text);opacity:0;transition:all .3s;z-index:999;white-space:nowrap}.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
  .water-row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;padding:16px 0}.water-drop{width:40px;height:48px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:28px;opacity:.25;transform:scale(.9)}.water-drop.filled{opacity:1;transform:scale(1);filter:drop-shadow(0 0 6px rgba(79,212,247,.5))}
  @keyframes fadeSlideUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.section.active>*{animation:fadeSlideUp .3s ease both}
</style>
</head>
<body>
<div class="app">
  <div class="header">
    <div class="header-top"><div class="logo">D<span>.</span>ELITE</div><div class="date-pill" id="datePill">Loading...</div></div>
    <div class="progress-row">
      <div class="progress-item"><div class="progress-label">Day Score</div><div class="progress-bar"><div class="progress-fill p-blue" id="scoreBar" style="width:0%"></div></div><div class="progress-val" id="scoreVal">0/10</div></div>
      <div class="progress-item"><div class="progress-label">Habits</div><div class="progress-bar"><div class="progress-fill p-green" id="habitBar" style="width:0%"></div></div><div class="progress-val" id="habitVal">0/8</div></div>
      <div class="progress-item"><div class="progress-label">Day #</div><div class="progress-bar"><div class="progress-fill p-orange" id="dayBar" style="width:0%"></div></div><div class="progress-val" id="dayVal">Day 1</div></div>
    </div>
  </div>
  <div class="notif-banner" id="notifBanner"><div class="notif-icon" id="notifIcon">â°</div><div class="notif-text"><div class="notif-title" id="notifTitle">Loading...</div><div class="notif-sub" id="notifSub">Checking...</div></div><button class="notif-dismiss" onclick="dismissNotif()">Ã—</button></div>
  <div class="nav"><button class="nav-btn active" onclick="switchTab('schedule',this)">Schedule</button><button class="nav-btn" onclick="switchTab('habits',this)">Habits</button><button class="nav-btn" onclick="switchTab('nutrition',this)">Nutrition</button><button class="nav-btn" onclick="switchTab('workout',this)">Workout</button><button class="nav-btn" onclick="switchTab('study',this)">Study</button><button class="nav-btn" onclick="switchTab('log',this)">Log</button><button class="nav-btn" onclick="switchTab('score',this)">Score</button></div>
  <div class="section active" id="tab-schedule"><div class="section-title">Today's Schedule</div><div class="section-sub" id="dayTypeLabel">Loading...</div><div class="timeline" id="timeline"></div></div>
  <div class="section" id="tab-habits"><div class="section-title">Daily Habits</div><div class="section-sub">Tap to mark complete.</div><div class="habit-grid" id="habitGrid"></div><div class="divider"></div><div class="section-title" style="font-size:14px;margin-bottom:10px;">ğŸ’§ Hydration â€” 3L/day</div><div style="font-size:11px;color:var(--text2);text-align:center;margin-bottom:4px" id="waterCount">0/12</div><div class="water-row" id="waterRow"></div></div>
  <div class="section" id="tab-nutrition"><div class="section-title">Nutrition Tracker</div><div class="macro-grid" id="macroGrid"></div><div class="divider"></div><div class="section-title" style="font-size:14px;margin-bottom:10px;">Meal Plan</div><div class="meal-list" id="mealList"></div></div>
  <div class="section" id="tab-workout"><div class="workout-header"><div class="workout-day" id="workoutDayTitle">MONDAY</div><div class="workout-focus" id="workoutFocus">Push Day</div><div class="timer-display" id="restTimer">0:00</div><div class="workout-timer"><button class="timer-btn" onclick="setRest(30)">30s</button><button class="timer-btn" onclick="setRest(60)">60s</button><button class="timer-btn" onclick="setRest(90)">90s</button><button class="timer-btn primary" id="restBtn" onclick="toggleRest()">â–¶ Rest</button></div></div><div class="exercise-list" id="exerciseList"></div></div>
  <div class="section" id="tab-study"><div class="study-timer-card"><div class="study-phase" id="studyPhaseLabel">PHASE 1</div><div class="study-topic" id="studyTopicLabel">Loading...</div><div class="study-ring"><svg width="120" height="120" viewBox="0 0 120 120"><circle class="ring-bg" cx="60" cy="60" r="54"/><circle class="ring-fill" id="studyRing" cx="60" cy="60" r="54" stroke-dasharray="339.3" stroke-dashoffset="339.3"/></svg><div class="ring-text"><div class="ring-min" id="studyMinDisplay">90</div><div class="ring-label">min left</div></div></div><div class="study-controls"><button class="study-btn btn-start" id="studyStartBtn" onclick="toggleStudyTimer()">â–¶ Start</button><button class="study-btn btn-pause" onclick="pauseStudy()">â¸ Pause</button><button class="study-btn btn-reset" onclick="resetStudy()">â†º Reset</button></div></div><div class="section-title" style="font-size:14px;margin-bottom:10px;">Session Blocks</div><div class="phase-blocks"><div class="phase-block"><div class="phase-dot" style="background:var(--accent)"></div><div class="phase-info"><div class="phase-name">Theory (30 min)</div><div class="phase-time">Read. No video. No phone.</div></div><div class="phase-status" id="theoryStatus">â€”</div></div><div class="phase-block"><div class="phase-dot" style="background:var(--accent2)"></div><div class="phase-info"><div class="phase-name">Application (40 min)</div><div class="phase-time">Solve by hand. Verify.</div></div><div class="phase-status" id="applyStatus">â€”</div></div><div class="phase-block"><div class="phase-dot" style="background:var(--accent3)"></div><div class="phase-info"><div class="phase-name">Reflection (20 min)</div><div class="phase-time">Write mistake log.</div></div><div class="phase-status" id="reflectStatus">â€”</div></div></div></div>
  <div class="section" id="tab-log"><div class="section-title">ğŸ”´ Mistake Log</div><div class="section-sub">Every error. Root cause only.</div><div class="log-input-card"><div class="log-input-title">New Entry</div><div class="log-field"><div class="log-label">What went wrong</div><textarea class="log-input" id="logWhat" rows="2" placeholder="Describe the mistake..."></textarea></div><div class="log-field"><div class="log-label">Root cause</div><textarea class="log-input" id="logWhy" rows="2" placeholder="The real reason..."></textarea></div><div class="log-field"><div class="log-label">How to fix it</div><textarea class="log-input" id="logFix" rows="2" placeholder="New habit?"></textarea></div><button class="log-submit" onclick="addLogEntry()">+ Add to Log</button></div><div class="log-entries" id="logEntries"><div class="empty-state"><div class="e-icon">ğŸ“</div>No entries yet.</div></div></div>
  <div class="section" id="tab-score"><div class="section-title">Today's Score</div><div class="score-big"><div class="score-label">Auto-calculated</div><div class="score-number" id="bigScore" style="color:var(--accent)">0<span class="score-max">/10</span></div><div class="score-grade" id="scoreGrade">Complete your day</div></div><div class="score-breakdown" id="scoreBreakdown"></div><div class="divider"></div><div class="section-title" style="font-size:14px;margin-bottom:10px;">Today's Wins</div><div id="winsArea"><div class="win-badge"><div class="win-icon">ğŸ¯</div><div class="win-text">Complete habits to unlock wins</div></div></div></div>
</div>
<div class="toast" id="toast"></div>
<div class="bottom-nav"><button class="bnav-btn active" id="bnav-schedule" onclick="switchBottomNav('schedule')"><div class="bnav-icon">ğŸ“…</div><div class="bnav-label">Schedule</div></button><button class="bnav-btn" id="bnav-habits" onclick="switchBottomNav('habits')"><div class="bnav-icon">âœ…</div><div class="bnav-label">Habits</div></button><button class="bnav-btn" id="bnav-nutrition" onclick="switchBottomNav('nutrition')"><div class="bnav-icon">ğŸ¥—</div><div class="bnav-label">Food</div></button><button class="bnav-btn" id="bnav-workout" onclick="switchBottomNav('workout')"><div class="bnav-icon">ğŸ’ª</div><div class="bnav-label">Workout</div></button><button class="bnav-btn" id="bnav-study" onclick="switchBottomNav('study')"><div class="bnav-icon">ğŸ“š</div><div class="bnav-label">Study</div></button></div>
<script>
const START_DATE=new Date('2025-03-01');
const SCHEDULE_GYM=[{time:'5:30',label:'Wake Up',sub:'Warm water + 10 almonds + stretch',tag:'critical',icon:'ğŸŒ…'},{time:'5:45',label:'Home Workout',sub:'45-60 min',tag:'gym',icon:'ğŸ’ª'},{time:'6:45',label:'Freshen Up',sub:'Cold splash',tag:'routine',icon:'ğŸš¿'},{time:'7:00',label:'Post-Workout Meal',sub:'Banana + Peanut Butter + Oats',tag:'food',icon:'ğŸŒ'},{time:'7:30',label:'Commute',sub:'Head to office',tag:'routine',icon:'ğŸšŒ'},{time:'9:00',label:'Deep Work Block 1',sub:'High focus. No distractions.',tag:'critical',icon:'ğŸ’»'},{time:'11:00',label:'Snack Break',sub:'Fruit + nuts + water',tag:'food',icon:'ğŸ'},{time:'13:00',label:'Lunch',sub:'Dal + Roti + Sabzi + Salad',tag:'food',icon:'ğŸ±'},{time:'13:30',label:'Post-lunch Walk',sub:'5-10 min outside.',tag:'routine',icon:'ğŸš¶'},{time:'16:00',label:'Sprouts Snack',sub:'High protein. Water.',tag:'food',icon:'ğŸ¥—'},{time:'18:00',label:'Evening Walk (2 km)',sub:'No phone.',tag:'routine',icon:'ğŸŒ‡'},{time:'18:30',label:'Pre-Study Fuel',sub:'Banana or sweet potato',tag:'food',icon:'ğŸ '},{time:'20:00',label:'Dinner',sub:'Paneer/Tofu + Roti + Sabzi',tag:'food',icon:'ğŸ›'},{time:'20:30',label:'STUDY TABLE â€” 90 min',sub:'Theory 30 â†’ Apply 40 â†’ Reflect 20',tag:'study',icon:'ğŸ“š'},{time:'22:00',label:'Mistake Log',sub:'What went wrong today.',tag:'study',icon:'ğŸ“'},{time:'22:15',label:'Wind Down',sub:'Turmeric milk + magnesium',tag:'routine',icon:'ğŸŒ¿'},{time:'22:30',label:'SLEEP',sub:'7+ hours.',tag:'sleep',icon:'ğŸŒ™'}];
const SCHEDULE_REST=[{time:'6:30',label:'Wake Up',sub:'Warm water + almonds',tag:'routine',icon:'ğŸŒ…'},{time:'6:45',label:'Mobility Routine',sub:'15 min stretch',tag:'gym',icon:'ğŸ§˜'},{time:'7:30',label:'Breakfast',sub:'Oats + plant milk',tag:'food',icon:'ğŸ¥£'},{time:'9:00',label:'Office / Study',sub:'Deep work',tag:'critical',icon:'ğŸ’»'},{time:'11:00',label:'Snack',sub:'Fruit + walnuts',tag:'food',icon:'ğŸ'},{time:'13:00',label:'Lunch',sub:'Dal + 1 Roti + Sabzi',tag:'food',icon:'ğŸ±'},{time:'16:00',label:'Sprouts snack',sub:'Light and protein-rich',tag:'food',icon:'ğŸ¥—'},{time:'18:30',label:'Evening Walk',sub:'Brisk 2 km.',tag:'gym',icon:'ğŸŒ‡'},{time:'19:00',label:'Dinner',sub:'Tofu/Dal khichdi.',tag:'food',icon:'ğŸ›'},{time:'20:30',label:'STUDY TABLE â€” 90 min',sub:'Theory 30 â†’ Apply 40 â†’ Reflect 20',tag:'study',icon:'ğŸ“š'},{time:'22:00',label:'Mistake Log',sub:'What pattern this week?',tag:'study',icon:'ğŸ“'},{time:'22:30',label:'SLEEP',sub:'7+ hours.',tag:'sleep',icon:'ğŸŒ™'}];
const HABITS=[{id:'workout',icon:'ğŸ’ª',name:'Workout',target:'45-60 min'},{id:'study',icon:'ğŸ“š',name:'Study Session',target:'90 min'},{id:'water',icon:'ğŸ’§',name:'3L Water',target:'12 glasses'},{id:'protein',icon:'ğŸ¥—',name:'Protein Target',target:'~100g'},{id:'walk',icon:'ğŸš¶',name:'Evening Walk',target:'2 km'},{id:'sleep',icon:'ğŸŒ™',name:'Sleep by 10:30',target:'7+ hrs'},{id:'log',icon:'ğŸ“',name:'Mistake Log',target:'1 entry'},{id:'nophone',icon:'ğŸ“µ',name:'No Phone Study',target:'0 distractions'}];
const MEALS=[{time:'6:00',name:'Warm water + Almonds',macros:'3PÂ·2CÂ·6FÂ·70kcal'},{time:'7:15',name:'Banana + Peanut Butter',macros:'4PÂ·32CÂ·8FÂ·210kcal'},{time:'7:30',name:'Oats + Plant Milk',macros:'8PÂ·40CÂ·5FÂ·240kcal'},{time:'10:30',name:'Fruit + Nuts',macros:'3PÂ·20CÂ·8FÂ·165kcal'},{time:'13:00',name:'Dal + Roti + Sabzi',macros:'18PÂ·65CÂ·6FÂ·390kcal'},{time:'16:00',name:'Sprouts Chaat',macros:'10PÂ·22CÂ·2FÂ·150kcal'},{time:'18:30',name:'Banana/Sweet Potato',macros:'2PÂ·27CÂ·0FÂ·110kcal'},{time:'20:00',name:'Paneer/Tofu + Roti',macros:'18PÂ·40CÂ·8FÂ·310kcal'},{time:'22:00',name:'Turmeric Milk',macros:'6PÂ·14CÂ·3FÂ·110kcal'}];
const MEAL_M=[{cal:70,prot:3,carb:2,fat:6},{cal:210,prot:4,carb:32,fat:8},{cal:240,prot:8,carb:40,fat:5},{cal:165,prot:3,carb:20,fat:8},{cal:390,prot:18,carb:65,fat:6},{cal:150,prot:10,carb:22,fat:2},{cal:110,prot:2,carb:27,fat:0},{cal:310,prot:18,carb:40,fat:8},{cal:110,prot:6,carb:14,fat:3}];
const WORKOUTS={1:{name:'MONDAY',focus:'Push â€” ChestÂ·ShouldersÂ·Triceps',exercises:[{name:'Push-ups',sets:'4Ã—15',note:'Slow 3s down.'},{name:'Pike Push-ups',sets:'3Ã—12',note:'Shoulders focus.'},{name:'Diamond Push-ups',sets:'3Ã—10',note:'Tricep isolation.'},{name:'Decline Push-ups',sets:'3Ã—10',note:'Upper chest.'},{name:'Tricep Dips',sets:'3Ã—12',note:'Chair.'},{name:'Plank',sets:'3Ã—45s',note:'Hold it.'}]},2:{name:'TUESDAY',focus:'Pull â€” BackÂ·Biceps',exercises:[{name:'Door-frame Row',sets:'4Ã—12',note:'Squeeze blades.'},{name:'Superman Hold',sets:'3Ã—15',note:'Lift arms+legs.'},{name:'Reverse Snow Angel',sets:'3Ã—15',note:'Arms along floor.'},{name:'Bicep Curl',sets:'3Ã—15',note:'3s eccentric.'},{name:'Dead Bug',sets:'3Ã—10/side',note:'Back flat.'}]},3:{name:'WEDNESDAY',focus:'Rest & Mobility',exercises:[{name:'Morning Mobility',sets:'15 min',note:'Cat-cow, circles.'},{name:'Brisk Walk',sets:'25-30 min',note:'Easy pace.'},{name:'Deep Stretching',sets:'15 min',note:'Hold 30-45s.'}]},4:{name:'THURSDAY',focus:'Legs â€” QuadsÂ·GlutesÂ·Calves',exercises:[{name:'Bodyweight Squat',sets:'4Ã—20',note:'Sit back.'},{name:'Bulgarian Split Squat',sets:'3Ã—10/leg',note:'Chair.'},{name:'Glute Bridge',sets:'4Ã—20',note:'Squeeze at top.'},{name:'Single-leg Deadlift',sets:'3Ã—10/leg',note:'Balance.'},{name:'Calf Raises',sets:'4Ã—25',note:'Full range.'},{name:'Jump Squat',sets:'3Ã—10',note:'Land softly.'}]},5:{name:'FRIDAY',focus:'Core + Full Body',exercises:[{name:'Plank',sets:'3Ã—60s',note:'Neutral spine.'},{name:'Side Plank',sets:'3Ã—30s/side',note:'Hip off floor.'},{name:'Mountain Climbers',sets:'3Ã—30s',note:'Core tight.'},{name:'Bicycle Crunches',sets:'3Ã—20/side',note:'Slow rotation.'},{name:'Leg Raises',sets:'3Ã—15',note:'Back down.'},{name:'Burpees',sets:'3Ã—8',note:'Land softly.'}]},6:{name:'SATURDAY',focus:'Recovery + Study',exercises:[{name:'Light Walk',sets:'20-30 min',note:'Sunlight.'},{name:'Mobility',sets:'10 min',note:'Full body.'},{name:'Breathing',sets:'5-10 min',note:'Box breathing.'}]},0:{name:'SUNDAY',focus:'Full Rest + Review',exercises:[{name:'Morning Walk',sets:'30 min',note:'No destination.'},{name:'Weekly Log Review',sets:'30 min',note:'Find patterns.'},{name:'Plan Next Week',sets:'15 min',note:'Check blueprint.'}]}};
const STUDY_PHASES=[{phase:'Phase 1',topic:'Normal Stress Â· Shear Stress Â· Hooke's Law',month:1},{phase:'Phase 1',topic:'Trigonometry Â· Derivatives Â· Integration',month:1},{phase:'Phase 1',topic:'Von Mises Â· Tresca Â· Factor of Safety',month:2},{phase:'Phase 1',topic:'Beams Â· BMD Â· SFD Â· Bending Stress',month:2},{phase:'Phase 1',topic:'FEA Concept Â· Stiffness Matrix',month:3},{phase:'Phase 1',topic:'Mesh Â· Element Types Â· Quality',month:3},{phase:'Phase 2',topic:'Linear Algebra Â· Matrix Operations',month:4},{phase:'Phase 2',topic:'FEA Error Sources',month:4},{phase:'Phase 2',topic:'Contact Mechanics',month:5},{phase:'Phase 2',topic:'Python Basics Â· Loops Â· Functions',month:5},{phase:'Phase 2',topic:'Thermal Analysis Â· Fourier's Law',month:6},{phase:'Phase 2',topic:'Thermal-Structural Coupling Â· CTE',month:6}];
function getToday(){return new Date().toISOString().slice(0,10)}
function loadState(){const k='diptej_'+getToday(),r=localStorage.getItem(k);return r?JSON.parse(r):{habits:{},meals:{},exercises:{},water:0,studySeconds:0,schedule:{}}}
function saveState(){localStorage.setItem('diptej_'+getToday(),JSON.stringify(state))}
function loadLogs(){const r=localStorage.getItem('diptej_logs');return r?JSON.parse(r):[]}
function saveLogs(l){localStorage.setItem('diptej_logs',JSON.stringify(l))}
let state=loadState(),allLogs=loadLogs();
function getDOW(){return new Date().getDay()}
function isGymDay(){return[1,2,4,5].includes(getDOW())}
function getDayNum(){const t=new Date();t.setHours(0,0,0,0);const s=new Date(START_DATE);s.setHours(0,0,0,0);return Math.max(1,Math.floor((t-s)/86400000)+1)}
function getStudyPhase(){return STUDY_PHASES[Math.min(Math.floor((Math.ceil(getDayNum()/7)-1)/2),STUDY_PHASES.length-1)]}
function getNowMins(){const n=new Date();return n.getHours()*60+n.getMinutes()}
function t2m(s){const[h,m]=s.split(':').map(Number);return h*60+(m||0)}
function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2500)}
function calcScore(){let s=0,h=state.habits;if(h.workout)s+=2;if(h.study)s+=2;s+=state.water>=12?1:state.water>=8?.5:0;if(h.protein)s+=1;if(h.walk)s+=.5;if(h.sleep)s+=1;if(h.log)s+=1;if(h.nophone)s+=.5;return Math.min(10,s)}
function init(){updateHeader();renderSchedule();renderHabits();renderNutrition();renderWorkout();renderStudy();renderLog();renderScore();updateNotifBanner();setInterval(updateHeader,60000);setInterval(updateNotifBanner,60000)}
function updateHeader(){const n=new Date();document.getElementById('datePill').textContent=n.toLocaleDateString('en-IN',{weekday:'short',month:'short',day:'numeric'}).toUpperCase();const d=getDayNum();document.getElementById('dayVal').textContent='Day '+d;document.getElementById('dayBar').style.width=Math.min(100,(d/365)*100)+'%';updateScoreBar()}
function updateScoreBar(){const sc=calcScore(),hd=Object.values(state.habits).filter(Boolean).length;document.getElementById('scoreBar').style.width=(sc/10)*100+'%';document.getElementById('scoreVal').textContent=sc.toFixed(1)+'/10';document.getElementById('habitBar').style.width=(hd/8)*100+'%';document.getElementById('habitVal').textContent=hd+'/8'}
function renderSchedule(){const gym=isGymDay(),sched=gym?SCHEDULE_GYM:SCHEDULE_REST,dow=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'][getDOW()];document.getElementById('dayTypeLabel').textContent=(gym?'Gym Day â€” ':'Rest â€” ')+dow;const nowM=getNowMins(),tl=document.getElementById('timeline');tl.innerHTML='';sched.forEach((item,i)=>{const iM=t2m(item.time),nM=i<sched.length-1?t2m(sched[i+1].time):1440,isCur=nowM>=iM&&nowM<nM,isDone=nowM>=nM||state.schedule[item.label],dc=isDone?'dot-done':isCur?'dot-current':item.tag==='critical'?'dot-critical':'dot-pending',div=document.createElement('div');div.className='timeline-item';div.innerHTML=`<div class="timeline-dot ${dc}"></div><div class="timeline-card ${isCur?'current-card':isDone?'done-card':''}" onclick="toggleSched('${item.label}')"><div class="card-row"><div class="card-time">${item.icon} ${item.time}</div><div class="card-tag tag-${item.tag}">${item.tag}</div></div><div class="card-title">${item.label}</div><div class="card-sub">${item.sub}</div>${isCur?`<button class="check-btn ${isDone?'checked':''}">${isDone?'âœ“ Done':'â¬œ Mark Complete'}</button>`:''}</div>`;tl.appendChild(div);if(isCur)setTimeout(()=>div.scrollIntoView({behavior:'smooth',block:'center'}),300)})}
function toggleSched(l){state.schedule[l]=!state.schedule[l];saveState();renderSchedule()}
function renderHabits(){const g=document.getElementById('habitGrid');g.innerHTML='';HABITS.forEach(h=>{const done=state.habits[h.id],div=document.createElement('div');div.className='habit-card'+(done?' done':'');div.onclick=()=>toggleHabit(h.id);div.innerHTML=`<div class="habit-icon">${h.icon}</div><div class="habit-name">${h.name}</div><div class="habit-target">${h.target}</div><div class="habit-status">${done?'âœ“ Complete':'â—‹ Pending'}</div>`;g.appendChild(div)});renderWater()}
function toggleHabit(id){state.habits[id]=!state.habits[id];saveState();renderHabits();updateScoreBar();renderScore();if(state.habits[id])showToast('âœ“ Done!')}
function renderWater(){const r=document.getElementById('waterRow');r.innerHTML='';for(let i=0;i<12;i++){const d=document.createElement('div');d.className='water-drop'+(i<state.water?' filled':'');d.textContent='ğŸ’§';d.onclick=()=>toggleWater(i);r.appendChild(d)}document.getElementById('waterCount').textContent=state.water+'/12 glasses'}
function toggleWater(i){state.water=i<state.water?i:i+1;if(state.water>=12)state.habits.water=true;saveState();renderWater();updateScoreBar()}
function renderNutrition(){const g=document.getElementById('macroGrid');g.innerHTML='';[{label:'Calories',target:2100,unit:'kcal',cc:'c-cal',fc:'m-cal',key:'cal'},{label:'Protein',target:100,unit:'g',cc:'c-prot',fc:'m-prot',key:'prot'},{label:'Carbs',target:260,unit:'g',cc:'c-carb',fc:'m-carb',key:'carb'},{label:'Fats',target:60,unit:'g',cc:'c-fat',fc:'m-fat',key:'fat'}].forEach(m=>{const cur=MEALS.reduce((s,_,i)=>s+(state.meals[i]?MEAL_M[i][m.key]:0),0),d=document.createElement('div');d.className='macro-card';d.innerHTML=`<div class="macro-label">${m.label}</div><div class="macro-vals"><div class="macro-current ${m.cc}">${cur}</div><div class="macro-sep">/</div><div class="macro-target">${m.target}</div><div class="macro-unit">${m.unit}</div></div><div class="macro-bar"><div class="macro-fill ${m.fc}" style="width:${Math.min(100,(cur/m.target)*100)}%"></div></div>`;g.appendChild(d)});const l=document.getElementById('mealList');l.innerHTML='';MEALS.forEach((meal,i)=>{const eaten=state.meals[i],d=document.createElement('div');d.className='meal-item'+(eaten?' eaten':'');d.onclick=()=>toggleMeal(i);d.innerHTML=`<div class="meal-time">${meal.time}</div><div class="meal-info"><div class="meal-name">${meal.name}</div><div class="meal-macros">${meal.macros}</div></div><div class="meal-check">${eaten?'âœ…':'â¬œ'}</div>`;l.appendChild(d)})}
function toggleMeal(i){state.meals[i]=!state.meals[i];if(Object.values(state.meals).filter(Boolean).length>=6)state.habits.protein=true;saveState();renderNutrition();updateScoreBar()}
let restInt=null,restSecs=0,restOn=false;
function renderWorkout(){const w=WORKOUTS[getDOW()]||WORKOUTS[1];document.getElementById('workoutDayTitle').textContent=w.name;document.getElementById('workoutFocus').textContent=w.focus;const l=document.getElementById('exerciseList');l.innerHTML='';w.exercises.forEach((ex,i)=>{const done=state.exercises[i],d=document.createElement('div');d.className='exercise-item'+(done?' done-ex':'');d.onclick=()=>toggleEx(i,w.exercises.length);d.innerHTML=`<div class="ex-num">${i+1}</div><div class="ex-info"><div class="ex-name">${ex.name}</div><div class="ex-sets">${ex.sets} Â· ${ex.note}</div></div><div class="ex-check">${done?'âœ…':'â¬œ'}</div>`;l.appendChild(d)})}
function toggleEx(i,t){state.exercises[i]=!state.exercises[i];if(Object.values(state.exercises).filter(Boolean).length>=t*.8)state.habits.workout=true;saveState();renderWorkout();updateScoreBar();if(state.exercises[i])showToast('âœ“ Done! Start rest.')}
function setRest(s){restSecs=s;updateRestDisp()}
function toggleRest(){if(restOn){clearInterval(restInt);restOn=false;document.getElementById('restBtn').textContent='â–¶ Rest'}else{if(restSecs<=0)restSecs=60;restOn=true;document.getElementById('restBtn').textContent='â¸ Pause';restInt=setInterval(()=>{restSecs--;updateRestDisp();if(restSecs<=0){clearInterval(restInt);restOn=false;document.getElementById('restBtn').textContent='â–¶ Rest';showToast('ğŸ’ª Rest done!')}},1000)}}
function updateRestDisp(){const m=Math.floor(restSecs/60),s=restSecs%60;document.getElementById('restTimer').textContent=m+':'+(s+'').padStart(2,'0')}
const STUDY_TOTAL=5400;let studyInt=null,studyEl=state.studySeconds||0,studyOn=false;
function renderStudy(){const p=getStudyPhase();document.getElementById('studyPhaseLabel').textContent=p.phase+' â€” MONTH '+p.month;document.getElementById('studyTopicLabel').textContent=p.topic;updateStudyDisp()}
function updateStudyDisp(){document.getElementById('studyMinDisplay').textContent=Math.ceil(Math.max(0,STUDY_TOTAL-studyEl)/60);document.getElementById('studyRing').style.strokeDashoffset=339.3-(studyEl/STUDY_TOTAL)*339.3;const tD=studyEl>=1800,aD=studyEl>=4200,rD=studyEl>=5400;document.getElementById('theoryStatus').textContent=tD?'âœ“':studyEl>0?Math.floor(studyEl/60)+'m':'â€”';document.getElementById('applyStatus').textContent=aD?'âœ“':tD?Math.floor((studyEl-1800)/60)+'m':'â€”';document.getElementById('reflectStatus').textContent=rD?'âœ“':aD?Math.floor((studyEl-4200)/60)+'m':'â€”';if(rD&&!state.habits.study){state.habits.study=true;saveState();updateScoreBar();showToast('ğŸ“š Study complete!')}}
function toggleStudyTimer(){if(studyOn){pauseStudy();return}studyOn=true;document.getElementById('studyStartBtn').textContent='â¸ Pause';studyInt=setInterval(()=>{studyEl++;state.studySeconds=studyEl;saveState();updateStudyDisp();if(studyEl===1800)showToast('Theory done â†’ Application!');if(studyEl===4200)showToast('Application done â†’ Reflection!')},1000)}
function pauseStudy(){studyOn=false;clearInterval(studyInt);document.getElementById('studyStartBtn').textContent='â–¶ Resume'}
function resetStudy(){pauseStudy();studyEl=0;state.studySeconds=0;saveState();document.getElementById('studyStartBtn').textContent='â–¶ Start';updateStudyDisp()}
function renderLog(){const c=document.getElementById('logEntries');if(!allLogs.length){c.innerHTML='<div class="empty-state"><div class="e-icon">ğŸ“</div>No entries yet.</div>';return}c.innerHTML='';[...allLogs].reverse().forEach(l=>{const d=document.createElement('div');d.className='log-entry';d.innerHTML=`<div class="log-entry-date">ğŸ“… ${l.date}</div><div class="log-entry-what">âŒ ${l.what}</div><div class="log-entry-why">ğŸ¤” ${l.why}</div><div class="log-entry-fix">âœ… ${l.fix}</div>`;c.appendChild(d)})}
function addLogEntry(){const w=document.getElementById('logWhat').value.trim(),y=document.getElementById('logWhy').value.trim(),f=document.getElementById('logFix').value.trim();if(!w||!y){showToast('âš  Fill what + why');return}allLogs.push({date:new Date().toLocaleDateString('en-IN'),what:w,why:y,fix:f});saveLogs(allLogs);state.habits.log=true;saveState();document.getElementById('logWhat').value='';document.getElementById('logWhy').value='';document.getElementById('logFix').value='';renderLog();updateScoreBar();renderHabits();showToast('âœ“ Logged')}
function renderScore(){const sc=calcScore();document.getElementById('bigScore').style.color=sc>=8?'var(--accent3)':sc>=5?'var(--accent)':'var(--accent2)';document.getElementById('bigScore').innerHTML=sc.toFixed(1)+'<span class="score-max">/10</span>';document.getElementById('scoreGrade').textContent=sc>=9?'Outstanding â€” elite day':sc>=7?'Strong day':sc>=5?'Decent â€” push harder':sc>=3?'Still showed up':'New day tomorrow';const bd=document.getElementById('scoreBreakdown');bd.innerHTML='';[{n:'Workout',v:state.habits.workout?2:0,m:2},{n:'Study 90min',v:state.habits.study?2:0,m:2},{n:'Water 3L',v:state.water>=12?1:state.water>=8?.5:0,m:1},{n:'Protein',v:state.habits.protein?1:0,m:1},{n:'Walk 2km',v:state.habits.walk?.5:0,m:.5},{n:'Sleep 10:30',v:state.habits.sleep?1:0,m:1},{n:'Mistake Log',v:state.habits.log?1:0,m:1},{n:'No-phone',v:state.habits.nophone?.5:0,m:.5}].forEach(it=>{const d=document.createElement('div');d.className='score-row';d.innerHTML=`<div class="score-row-name">${it.v>0?'âœ“':'â—‹'} ${it.n}</div><div><span class="score-row-val" style="color:${it.v>0?'var(--accent3)':'var(--text3)'}">${it.v}</span><span class="score-row-max">/${it.m}</span></div>`;bd.appendChild(d)});const wa=document.getElementById('winsArea'),wins=[];if(state.habits.workout)wins.push({i:'ğŸ’ª',t:'Workout complete.'});if(state.habits.study)wins.push({i:'ğŸ“š',t:'90 mins compounding.'});if(state.water>=12)wins.push({i:'ğŸ’§',t:'Fully hydrated.'});if(state.habits.log)wins.push({i:'ğŸ“',t:'Mistake logged.'});if(sc>=8)wins.push({i:'â­',t:'Score 8+ â€” elite day.'});wa.innerHTML=wins.length?wins.map(w=>`<div class="win-badge"><div class="win-icon">${w.i}</div><div class="win-text">${w.t}</div></div>`).join(''):'<div class="win-badge"><div class="win-icon">ğŸ¯</div><div class="win-text">Complete habits to unlock wins</div></div>'}
function updateNotifBanner(){const nowM=getNowMins(),sched=isGymDay()?SCHEDULE_GYM:SCHEDULE_REST,next=sched.find((_,i)=>t2m(sched[i].time)>nowM)||sched[0],mu=Math.max(0,t2m(next.time)-nowM);document.getElementById('notifIcon').textContent=next.icon;document.getElementById('notifTitle').textContent='Next: '+next.label;document.getElementById('notifSub').textContent=mu<2?'RIGHT NOW':mu<60?'In '+mu+' min':' At '+next.time+' â€” '+Math.floor(mu/60)+'h '+mu%60+'m away'}
function dismissNotif(){document.getElementById('notifBanner').style.display='none'}
function switchTab(id,btn){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));document.getElementById('tab-'+id).classList.add('active');if(btn)btn.classList.add('active')}
function switchBottomNav(id){switchTab(id,null);document.querySelectorAll('.bnav-btn').forEach(b=>b.classList.remove('active'));document.getElementById('bnav-'+id)?.classList.add('active');const m={schedule:'Schedule',habits:'Habits',nutrition:'Nutrition',workout:'Workout',study:'Study'};document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active',b.textContent===m[id]))}
window.addEventListener('load',init);
</script>
</body>
</html>